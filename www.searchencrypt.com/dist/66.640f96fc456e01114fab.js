(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{100:function(e,t,n){"use strict";n.r(t);var s=n(4),i=n.n(s),r={name:"default-section",props:{section:{type:Object,required:!0},currentIndex:{type:[Number,String],required:!1,default:1/0},renderSuggestion:{type:Function,required:!1},normalizeItemFunction:{type:Function,required:!0}},data:function(){return{_currentIndex:null}},computed:{list:function(){var e=this.section,t=e.limit,n=e.data;return n.length<t&&(t=n.length),n.slice(0,t)}},methods:{getItemIndex:function(e){return this.section.start_index+e},getItemByIndex:function(e){return this.section.data[e]},onMouseEnter:function(e){var t=e.currentTarget.getAttribute("data-suggestion-index");this._currentIndex=t,this.$emit("updateCurrentIndex",t)},onMouseLeave:function(){this.$emit("updateCurrentIndex",null)}},render:function(e){var t=this,n={beforeSection:this.$scopedSlots["before-section-"+this.section.name],afterSectionDefault:this.$scopedSlots["after-section"],afterSectionNamed:this.$scopedSlots["after-section-"+this.section.name]},s="autosuggest__results-before autosuggest__results-before--"+this.section.name,i=n.beforeSection&&n.beforeSection({section:this.section,className:s})||[];return e("ul",{attrs:{role:"listbox","aria-labelledby":"autosuggest"}},[i[0]&&i[0]||this.section.label&&e("li",{class:s},this.section.label)||"",this.list.map((function(n,s){var i=t.normalizeItemFunction(t.section.name,t.section.type,t.section.label,n);return e("li",{attrs:{role:"option","data-suggestion-index":t.getItemIndex(s),"data-section-name":t.section.name,id:"autosuggest__results-item--"+t.getItemIndex(s)},key:t.getItemIndex(s),class:{"autosuggest__results-item--highlighted":t.getItemIndex(s)==t._currentIndex,"autosuggest__results-item":!0},on:{mouseenter:t.onMouseEnter,mouseleave:t.onMouseLeave}},[t.renderSuggestion?t.renderSuggestion(i):t.$scopedSlots.default&&t.$scopedSlots.default({_key:s,suggestion:i})])})),n.afterSectionDefault&&n.afterSectionDefault({section:this.section,className:"autosuggest__results-after autosuggest__results-after--"+this.section.name}),n.afterSectionNamed&&n.afterSectionNamed({section:this.section,className:"autosuggest__results_after autosuggest__results-after--"+this.section.name})])}};function o(e,t){(function(e,t){return!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))})(e,t)||(e.className+=" "+t)}var a="default",u="default-section",c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:e.componentAttrIdAutosuggest}},[e._t("before-input"),n("input",e._g(e._b({class:[e.isOpen?"autosuggest__input--open":"",e.internal_inputProps.class],attrs:{type:e.internal_inputProps.type,autocomplete:e.internal_inputProps.autocomplete,role:"combobox","aria-autocomplete":"list","aria-owns":"autosuggest__results","aria-activedescendant":e.isOpen&&null!==e.currentIndex?"autosuggest__results-item--"+e.currentIndex:"","aria-haspopup":e.isOpen?"true":"false","aria-expanded":e.isOpen?"true":"false"},domProps:{value:e.internalValue},on:{input:e.inputHandler,keydown:e.handleKeyStroke}},"input",e.internal_inputProps,!1),e.listeners)),e._t("after-input"),e._v(" "),n("div",{class:e.componentAttrClassAutosuggestResultsContainer},[e.isOpen?n("div",{class:e.componentAttrClassAutosuggestResults,attrs:{"aria-labelledby":e.componentAttrIdAutosuggest}},[e._t("before-suggestions"),e._v(" "),e._l(e.computedSections,(function(t,s){return n(t.type,{key:e.getSectionRef(s),ref:e.getSectionRef(s),refInFor:!0,tag:"component",attrs:{"current-index":e.currentIndex,"normalize-item-function":e.normalizeItem,"render-suggestion":e.renderSuggestion,section:t},on:{updateCurrentIndex:e.updateCurrentIndex},scopedSlots:e._u([{key:"before-section-"+(t.name||t.label),fn:function(n){var s=n.section,i=n.className;return[e._t("before-section-"+(t.name||t.label),null,{section:s,className:i})]}},{key:"default",fn:function(t){var n=t.suggestion,s=t._key;return[e._t("default",[e._v(" "+e._s(n.item)+" ")],{suggestion:n,index:s})]}},{key:"after-section-"+(t.name||t.label),fn:function(n){var s=n.section;return[e._t("after-section-"+(t.name||t.label),null,{section:s})]}},{key:"after-section",fn:function(t){var n=t.section;return[e._t("after-section",null,{section:n})]}}])})})),e._v(" "),e._t("after-suggestions")],2):e._e()])],2)},staticRenderFns:[],name:"Autosuggest",components:{DefaultSection:r},props:{value:{type:String,default:null},inputProps:{type:Object,required:!0},limit:{type:Number,required:!1,default:1/0},suggestions:{type:Array,required:!0},renderSuggestion:{type:Function,required:!1,default:null},getSuggestionValue:{type:Function,required:!1,default:function(e){var t=e.item;return"object"==typeof t&&t.hasOwnProperty("name")?t.name:t}},shouldRenderSuggestions:{type:Function,required:!1,default:function(e,t){return e>0&&!t}},sectionConfigs:{type:Object,required:!1,default:function(){return{default:{onSelected:null}}}},onSelected:{type:Function,required:!1,default:null},componentAttrIdAutosuggest:{type:String,required:!1,default:"autosuggest"},componentAttrClassAutosuggestResultsContainer:{type:String,required:!1,default:"autosuggest__results-container"},componentAttrClassAutosuggestResults:{type:String,required:!1,default:"autosuggest__results"}},data:function(){return{internalValue:null,searchInputOriginal:null,currentIndex:null,currentItem:null,loading:!1,didSelectFromOptions:!1,defaultInputProps:{type:"text",autocomplete:"off"},clientXMouseDownInitial:null}},computed:{internal_inputProps:function(){return Object.assign({},this.defaultInputProps,this.inputProps)},listeners:function(){var e=this;return Object.assign({},this.$listeners,{input:function(e){},click:function(){e.loading=!1,e.$listeners.click&&e.$listeners.click(e.currentItem),e.ensureItemVisible(e.currentItem,e.currentIndex)},selected:function(){e.currentItem&&e.sectionConfigs[e.currentItem.name]&&e.sectionConfigs[e.currentItem.name].onSelected?e.sectionConfigs[e.currentItem.name].onSelected(e.currentItem,e.searchInputOriginal):e.sectionConfigs.default.onSelected?e.sectionConfigs.default.onSelected(null,e.searchInputOriginal):e.$listeners.selected&&e.$emit("selected",e.currentItem),e.setChangeItem(null)}})},isOpen:function(){return this.shouldRenderSuggestions(this.totalResults,this.loading)},computedSections:function(){var e=this,t=0;return this.suggestions.map((function(n){if(n.data){var s,i,r=n.name?n.name:a,o=null;e.sectionConfigs[r]&&(s=e.sectionConfigs[r].limit,o=e.sectionConfigs[r].type,i=e.sectionConfigs[r].label),o=o||u,s=(s=s||e.limit)||1/0,s=n.data.length<s?n.data.length:s;var c={name:r,label:i=i||n.label,type:o,limit:s,data:n.data,start_index:t,end_index:t+s-1};return t+=s,c}}))},totalResults:function(){return this.computedSections.reduce((function(e,t){if(!t)return e;var n=t.limit,s=t.data;return e+(s.length>=n?n:s.length)}),0)}},watch:{value:{handler:function(e){this.internalValue=e},immediate:!0}},created:function(){this.loading=!0},mounted:function(){document.addEventListener("mouseup",this.onDocumentMouseUp),document.addEventListener("mousedown",this.onDocumentMouseDown)},beforeDestroy:function(){document.removeEventListener("mouseup",this.onDocumentMouseUp),document.removeEventListener("mousedown",this.onDocumentMouseDown)},methods:{inputHandler:function(e){var t=e.target.value;this.$emit("input",t),this.internalValue=t,this.didSelectFromOptions||(this.searchInputOriginal=t,this.currentIndex=null)},getSectionRef:function(e){return"computed_section_"+e},getItemByIndex:function(e){var t=!1;if(null===e)return t;for(var n=0;n<this.computedSections.length;n++)if(e>=this.computedSections[n].start_index&&e<=this.computedSections[n].end_index){var s=e-this.computedSections[n].start_index,i=this.$refs["computed_section_"+n][0];if(i){t=this.normalizeItem(this.computedSections[n].name,this.computedSections[n].type,i.section.label,i.getItemByIndex(s));break}}return t},handleKeyStroke:function(e){var t=e.keyCode;if(!([16,9,18,91,93].indexOf(t)>-1))switch(this.loading=!1,this.didSelectFromOptions=!1,t){case 40:case 38:if(e.preventDefault(),this.isOpen){if(38===t&&null===this.currentIndex)break;var n=40===t?1:-1,s=parseInt(this.currentIndex)+n;this.setCurrentIndex(s,this.totalResults),this.didSelectFromOptions=!0,this.totalResults>0&&this.currentIndex>=0?(this.setChangeItem(this.getItemByIndex(this.currentIndex)),this.didSelectFromOptions=!0):-1==this.currentIndex&&(this.currentIndex=null,this.internalValue=this.searchInputOriginal,e.preventDefault())}break;case 13:e.preventDefault(),this.totalResults>0&&this.currentIndex>=0&&(this.setChangeItem(this.getItemByIndex(this.currentIndex),!0),this.didSelectFromOptions=!0),this.loading=!0,this.listeners.selected(this.didSelectFromOptions);break;case 27:this.isOpen&&(this.loading=!0,this.currentIndex=null,this.internalValue=this.searchInputOriginal,this.$emit("input",this.searchInputOriginal),e.preventDefault())}},setChangeItem:function(e,t){if(void 0===t&&(t=!1),null!==this.currentIndex&&e){if(e){this.currentItem=e;var n=this.getSuggestionValue(e);this.internalValue=n,t&&(this.searchInputOriginal=n),this.ensureItemVisible(e,this.currentIndex)}}else this.currentItem=null},normalizeItem:function(e,t,n,s){return{name:e,type:t,label:n,item:s}},ensureItemVisible:function(e,t){var n=this.$el.querySelector("."+this.componentAttrClassAutosuggestResults);if(e&&(t||0===t)&&n){var s=this.$el.querySelector("#autosuggest__results-item--"+t);if(s){var i=n.clientHeight,r=n.scrollTop,o=s.clientHeight,a=s.offsetTop;o+a>=r+i?n.scrollTop=o+a-i:a<r&&r>0&&(n.scrollTop=a)}}},updateCurrentIndex:function(e){this.setCurrentIndex(e,-1,!0)},clickedOnScrollbar:function(e,t){var n=this.$el.querySelector("."+this.componentAttrClassAutosuggestResults),s=n&&n.clientWidth<=t+17&&t+17<=n.clientWidth+34;return"DIV"===e.target.tagName&&n&&s||!1},onDocumentMouseDown:function(e){var t=e.target.getBoundingClientRect?e.target.getBoundingClientRect():0;this.clientXMouseDownInitial=e.clientX-t.left},onDocumentMouseUp:function(e){if(!this.$el.contains(e.target))return this.loading=!0,void(this.currentIndex=null);"INPUT"===e.target.tagName||this.clickedOnScrollbar(e,this.clientXMouseDownInitial)||(this.loading=!0,this.didSelectFromOptions=!0,this.setChangeItem(this.getItemByIndex(this.currentIndex),!0),this.listeners.selected(!0))},setCurrentIndex:function(e,t,n){void 0===t&&(t=-1),void 0===n&&(n=!1);var s=e;n||(null===this.currentIndex||e>=t)&&(s=0),this.currentIndex=s;var i=this.$el.querySelector("#autosuggest__results-item--"+this.currentIndex),r="autosuggest__results-item--highlighted";this.$el.querySelector("."+r)&&function(e,t){e.classList&&e.classList.remove(t)}(this.$el.querySelector("."+r),r),i&&o(i,r)}}},l={install:function(e){e.component("vue-autosuggest-default-section",r),e.component("vue-autosuggest",c)}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(l);var d=i()("sp:search-bar"),g=i()("sp:search-bar:error"),h={name:"search-bar",props:["searchType"],components:{VueAutosuggest:c},data:function(){return{searchTerm:"",suggestions:null}},created:function(){this.searchTerm=this.$store.getters.currentSearchTerm},mounted:function(){var e=this;window.__searchBar=this,this.getSuggestions(),this.$refs.autosuggest.internalValue=this.searchTerm,this.$store.subscribe((function(t){"SET_SEARCH_TERM"!==t.type&&"UPDATE_CURRENT_SEARCH"!==t.type||(e.searchTerm=t.payload.searchTerm)}))},watch:{searchTerm:function(e){this.$refs.autosuggest&&(this.$refs.autosuggest.internalValue=e)},$route:function(e,t){this.searchTerm=this.$store.getters.currentSearchTerm}},computed:{shownSuggestions:function(){var e=this.suggestions;return!this.isLoading&&e&&this.searchTerm||(e=[]),[{data:e}]}},methods:{search:function(e,t){e=e||this.searchTerm,t=t||this.searchType,this.$emit("search",{searchTerm:e,searchType:t})},selectTerm:function(e){e!==this.searchTerm&&(this.searchTerm=e)},onFocus:function(e){d("onFocus() - ",e),this.$refs.autosuggest&&this.$refs.autosuggest.$el&&this.$refs.autosuggest.$el.querySelector("input")&&this.$refs.autosuggest.$el.querySelector("input").select()},onSelected:function(e){d("onSelected() - ",e),e&&e.item&&this.selectTerm(e.item),this.searchTerm&&this.search()},onInputChanged:function(e){d("onInputChanged() - ",e),e&&(this.selectTerm(e),this.getSuggestions())},getSuggestions:function(e){var t=this;e=e||this.searchTerm,!this.isLoading&&e&&(d("getSuggestions() - ",e),clearTimeout(this.suggestionsTimeoutKey),this.suggestionsTimeoutKey=setTimeout((function(){t.load(e)}),300))},load:function(e){var t=this;if(this.isLoading=!0,(e=e||this.searchTerm)&&"".concat(e).trim())return this.$store.dispatch("FETCH_SUGGESTIONS",{searchTerm:e}).then((function(e){t.suggestions=e,t.isLoading=!1})).catch((function(e){g(e),t.isLoading=!1}));this.isLoading=!1}}},p=(n(147),n(0)),f=Object(p.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"search-bar",attrs:{method:"get"},on:{submit:function(t){return t.preventDefault(),e.search(e.searchTerm,e.searchType)}}},[n("vue-autosuggest",{ref:"autosuggest",staticClass:"search-bar__autosuggest search-bar__container",attrs:{suggestions:e.shownSuggestions,"input-props":{name:"q",value:e.searchTerm,tabindex:0,class:"search-bar__search",autofocus:1,placeholder:"Search..."}},on:{input:e.onInputChanged,selected:e.onSelected,focus:e.onFocus}}),e._m(0)],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"search-bar__submit",attrs:{type:"submit"}},[t("i",{staticClass:"fas fa-search"})])}],!1,null,null,null);t.default=f.exports},147:function(e,t,n){"use strict";var s=n(26);n.n(s).a},148:function(e,t,n){(t=n(1)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&display=swap&subset=latin-ext);"]),t.push([e.i,"@import url(https://fonts.googleapis.com/css?family=Raleway:100,200,300,400,400i,500,500i,600,600i,700,800,900&display=swap&subset=latin-ext);"]),t.push([e.i,'.fa,.fas,.far,.fal,.fad,.fab{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1}.search-bar{display:flex;align-items:stretch;height:36px;margin:9px;position:relative;z-index:2}.search-bar__container{background:#fff;flex-grow:1;flex-wrap:wrap;align-items:stretch;border:1px solid #dcdcdc;border-right:0;box-shadow:0 1px 1px rgba(0,0,0,0.08) inset;border-radius:6px;transition:all 100ms ease}.search-bar__container:hover,.search-bar__container:focus{border-color:#b7b7b7;box-shadow:0 1px 2px rgba(0,0,0,0.12) inset}.search-bar__container:focus,.search-bar__container:focus-within,.search-bar__container:active{border-color:#4d90fe;box-shadow:0 1px 2px rgba(0,0,0,0.2) inset,0 1px 4px rgba(0,163,255,0.2) inset}.search-bar__container>div:first-of-type{height:100%}.autosuggest__results-container{flex-grow:1;margin-top:4.5px;padding:4.5px}[aria-expanded="false"] ~ .autosuggest__results-container{display:none}.autosuggest__results{text-align:left;box-shadow:0 1px 4px 0 rgba(86,61,54,0.25);padding:18px;margin-bottom:18px;border:1px solid #efefef;border-radius:2px;border:1px solid #dcdcdc;margin:0;padding:0;overflow:hidden;background:#fff}.autosuggest__results ul,.autosuggest__results ol{list-style:none;margin:0;padding:0}.autosuggest__results-item{padding:4.5px 9px}.autosuggest__results-item--highlighted{background:rgba(77,144,254,0.25)}.search-bar__search{padding:0 13.5px;border:0;flex-grow:1;width:100%;height:100%}.search-bar__search:focus{outline:0}.search-bar__submit{color:#fff;width:54px;padding:0;border:1px solid #337ab7;background-color:#337ab7;background:#4d90fe;background:-webkit-linear-gradient(top, #4d90fe, #4787ed);background:linear-gradient(to bottom, #4d90fe, #4787ed);background-repeat:repeat-x;text-shadow:0 1px rgba(0,0,0,0.12);font-size:22.42529px;border-radius:6px;position:relative;right:6px;cursor:pointer}\n',""]),e.exports=t},26:function(e,t,n){var s=n(148);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,n(2).default)("644bc96e",s,!0,{})}}]);